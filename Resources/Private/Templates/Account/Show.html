<html data-namespace-typo3-fluid="true"
      xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers">

<h2>Details of account #{account.number}</h2>

<ul>
  <li>Account number: #{account.number}</li>
  <li>Account holder: {account.holder}</li>
  <li>Account revision: {account.revision}</li>
</ul>

<h2>Transactions</h2>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>Entry</th>
      <th>Availability</th>
      <th class="text-right">Type</th>
      <th class="text-right">Value</th>
    </tr>
  </thead>
  <tbody>
    <f:if condition="{account.transactions}">
      <f:else>
        <tr>
          <td colspan="4">No account information available</td>
        </tr>
      </f:else>
    </f:if>
    <f:for each="{account.transactions}" as="transaction">
      <tr>
        <td>{transaction.entryDate -> f:format.date(format:'Y-m-d, H:i:s (P)')}</td>
        <td>{transaction.availabilityDate -> f:format.date(format:'Y-m-d, H:i:s (P)')}</td>
        <td class="text-right">
          <f:if condition="{transaction.value} < 0">
            <f:then>
              debit
              <span class="glyphicon glyphicon-log-out"></span>
            </f:then>
            <f:else>
              deposit
              <span class="glyphicon glyphicon-log-in"></span>
            </f:else>
          </f:if>
        </td>
        <td class="text-right">
          {transaction.value -> f:format.currency(decimals:2)} €
        </td>
      </tr>
    </f:for>
  </tbody>
  <tfoot>
    <tr>
      <th colspan="3">Balance</th>
      <th class="text-right">
        {account.balance -> f:format.currency()} €
      </th>
    </tr>
  </tfoot>
</table>

<f:link.action action="list" class="btn btn-primary" additionalAttributes="{role:'button'}">
  <span class="glyphicon glyphicon-chevron-left"></span>
  back to list
</f:link.action>

<f:if condition="{account.closed}">
  <f:else>
    <f:render partial="Modals/Deposit" arguments="{_all}" />
    <f:render partial="Modals/Debit" arguments="{_all}" />
  </f:else>
</f:if>

</html>